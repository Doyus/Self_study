<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>注册页面</title>
    <link rel="stylesheet" href="">
</head>
<body>
<center>
    <form action="{% url 'sa' %}" method="post" accept-charset="utf-8">
            {% csrf_token %}
            <br />
            <br />
            <h3>注册页>>>>>>>></h3>
            <br />
            <br />
            <br />
            姓名: <input type="text" name="namea" placeholder="请输入用户名" id='uname' onblur="sub()">
            <p id='myDiv' style="color:red;font-size: 25px;"></p>
            <br>
            密码: <input type="password" name="pwd">
            <br>
            <br>
            <br>
            <input type="submit" name="search" value='提交'>
            <script type="text/javascript">


     function sub(){
             // var xhr = new XMLHttpRequest();
             function getXhr () {
                try{
                    return new XMLHttpRequest();
                }catch(e){
                    try{
                        return new ActiveXObject("Msxml2.XMLHTTP")
                    }catch(e){
                        try{
                            return new ActiveXObject("Microsoft.XMLHTTP")
                        }catch(e){
                            alter('请更换浏览器')
                            throw e;
                        }
                    }
                }
            }
            var xhr = getXhr();
            // xhr.open('GET','http://localhost:9999/blog/ajax')
            var mo = document.getElementById('uname').value;
            xhr.open('POST','http://localhost:9999/blog/ajax');
            xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            xhr.send('name='+mo);
            // xhr.send()
            xhr.onreadystatechange=function()
                {
                    if (xhr.readyState==4 && xhr.status==200);
                    {
                        document.getElementById("myDiv").innerHTML=xhr.responseText;
                        // console.log(JSON.parse(xhr.responseText).name);
                    }
                }
        }


            </script>

    </form>
</center>
</body>
</html>